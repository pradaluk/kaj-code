{"ast":null,"code":"import _asyncToGenerator from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\School\\\\Bc\\\\bakalarka\\\\appka\\\\race-react\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import Race from'../components/Race';import RaceDetails from'../components/RaceDetails';import React,{useEffect,useState}from\"react\";import'../styles/UpcomingRaces.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpcomingRaces(){var restURL=\"/rest/races/\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),races=_useState2[0],setRaces=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),detailToShow=_useState6[0],setDetailToShow=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),profileData=_useState8[0],setProfileData=_useState8[1];function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var restURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:restURL=\"/rest/users/current\";_context.next=3;return fetch(restURL,{method:\"GET\",credentials:'include',headers:{mode:'no-cors','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){setProfileData(data);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchUser.apply(this,arguments);}function showDetails(detailToShow){setDetailToShow(detailToShow);setShow(!show);}function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(restURL,{headers:{method:\"GET\",'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){setRaces(data);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchData.apply(this,arguments);}useEffect(function(){fetchData();fetchUser();},[]);var raceList=[];races.forEach(function(race){raceList.push(/*#__PURE__*/_jsx(Race,{data:race,user:profileData,showDetails:showDetails},race.id));});return/*#__PURE__*/_jsxs(\"div\",{className:\"Page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"UpcomingRaces\",children:raceList}),/*#__PURE__*/_jsx(RaceDetails,{onClose:showDetails,data:detailToShow,show:show})]});}export default UpcomingRaces;","map":{"version":3,"sources":["E:/School/Bc/bakalarka/appka/race-react/src/pages/UpcomingRaces.js"],"names":["Race","RaceDetails","React","useEffect","useState","UpcomingRaces","restURL","races","setRaces","show","setShow","detailToShow","setDetailToShow","profileData","setProfileData","fetchUser","fetch","method","credentials","headers","mode","then","response","json","data","showDetails","fetchData","raceList","forEach","race","push","id"],"mappings":"oYAAA,MAAOA,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,MAAO,6BAAP,C,wFAEA,QAASC,CAAAA,aAAT,EAAyB,CAEvB,GAAMC,CAAAA,OAAO,CAAG,cAAhB,CACA,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,eAAwBJ,QAAQ,CAAC,KAAD,CAAhC,yCAAOK,IAAP,eAAaC,OAAb,eACA,eAAwCN,QAAQ,CAAC,EAAD,CAAhD,yCAAOO,YAAP,eAAqBC,eAArB,eACA,eAAsCR,QAAQ,CAAC,EAAD,CAA9C,yCAAOS,WAAP,eAAoBC,cAApB,eANuB,QAQRC,CAAAA,SARQ,qIAQvB,+IACMT,OADN,CACgB,qBADhB,uBAEQU,CAAAA,KAAK,CAACV,OAAD,CAAU,CACnBW,MAAM,CAAE,KADW,CAEnBC,WAAW,CAAE,SAFM,CAGnBC,OAAO,CAAE,CACPC,IAAI,CAAE,SADC,CAEP,eAAgB,kBAFT,CAHU,CAAV,CAAL,CAQHC,IARG,CAQE,SAAAC,QAAQ,CAAI,CAChB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAVG,EAWHF,IAXG,CAWE,SAAAG,IAAI,CAAI,CACZV,cAAc,CAACU,IAAD,CAAd,CACD,CAbG,CAFR,uDARuB,4CAyBvB,QAASC,CAAAA,WAAT,CAAqBd,YAArB,CAAmC,CACjCC,eAAe,CAACD,YAAD,CAAf,CACAD,OAAO,CAAC,CAACD,IAAF,CAAP,CACD,CA5BsB,QA6BRiB,CAAAA,SA7BQ,qIA6BvB,+JACQV,CAAAA,KAAK,CAACV,OAAD,CAAU,CACnBa,OAAO,CAAE,CACPF,MAAM,CAAE,KADD,CAEP,eAAgB,kBAFT,CADU,CAAV,CAAL,CAMHI,IANG,CAME,SAAAC,QAAQ,CAAI,CAChB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CARG,EASHF,IATG,CASE,SAAAG,IAAI,CAAI,CACZhB,QAAQ,CAACgB,IAAD,CAAR,CACD,CAXG,CADR,yDA7BuB,4CA4CvBrB,SAAS,CAAC,UAAM,CACduB,SAAS,GACTX,SAAS,GACV,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAIY,CAAAA,QAAQ,CAAG,EAAf,CAEApB,KAAK,CAACqB,OAAN,CAAc,SAAAC,IAAI,CAAI,CACpBF,QAAQ,CAACG,IAAT,cACE,KAAC,IAAD,EAAoB,IAAI,CAAED,IAA1B,CAAgC,IAAI,CAAEhB,WAAtC,CAAmD,WAAW,CAAEY,WAAhE,EAAWI,IAAI,CAACE,EAAhB,CADF,EAGD,CAJD,EAMA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,YAAK,SAAS,CAAC,eAAf,UACGJ,QADH,EADF,cAIE,KAAC,WAAD,EAAa,OAAO,CAAEF,WAAtB,CAAmC,IAAI,CAAEd,YAAzC,CAAuD,IAAI,CAAEF,IAA7D,EAJF,GADF,CAQD,CAED,cAAeJ,CAAAA,aAAf","sourcesContent":["import Race from '../components/Race';\r\nimport RaceDetails from '../components/RaceDetails';\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nimport '../styles/UpcomingRaces.css';\r\n\r\nfunction UpcomingRaces() {\r\n\r\n  const restURL = \"/rest/races/\";\r\n  const [races, setRaces] = useState([])\r\n  const [show, setShow] = useState(false)\r\n  const [detailToShow, setDetailToShow] = useState([])\r\n  const [profileData, setProfileData] = useState([])\r\n\r\n  async function fetchUser() {\r\n    let restURL = \"/rest/users/current\";\r\n    await fetch(restURL, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        mode: 'no-cors',\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        setProfileData(data);\r\n      })\r\n  }\r\n  function showDetails(detailToShow) {\r\n    setDetailToShow(detailToShow);\r\n    setShow(!show);\r\n  }\r\n  async function fetchData() {\r\n    await fetch(restURL, {\r\n      headers: {\r\n        method: \"GET\",\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        setRaces(data)\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n    fetchUser()\r\n  }, [])\r\n\r\n  let raceList = [];\r\n\r\n  races.forEach(race => {\r\n    raceList.push(\r\n      <Race key={race.id} data={race} user={profileData} showDetails={showDetails} />\r\n    )\r\n  });\r\n\r\n  return (\r\n    <div className=\"Page\">\r\n      <div className=\"UpcomingRaces\">\r\n        {raceList}\r\n      </div>\r\n      <RaceDetails onClose={showDetails} data={detailToShow} show={show} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpcomingRaces;\r\n"]},"metadata":{},"sourceType":"module"}