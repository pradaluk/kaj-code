{"ast":null,"code":"var _jsxFileName = \"E:\\\\School\\\\Bc\\\\appka\\\\race-react\\\\src\\\\components\\\\Race.js\";\nimport './Race.css';\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Race extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: false\n    };\n    this.renderDelete = this.renderDelete.bind(this);\n    this.isRegistered = this.isRegistered.bind(this);\n  }\n\n  isRegistered() {\n    if (this.props.data.results != null) {\n      this.props.data.results.array.forEach(element => {\n        if (element.user.id === this.props.user.id) {\n          return true;\n        }\n      });\n    }\n\n    return false;\n  }\n\n  renderDelete() {\n    if (this.props.data.organizor && this.props.user.id === this.props.data.organizor.id || this.props.user.id === this.props.data.organizor || this.props.user.role === \"ADMIN\") {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-button\",\n        onClick: () => {\n          this.DeleteRace();\n        },\n        children: \"DELETE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 20\n      }, this);\n    } else {\n      return;\n    }\n  }\n\n  async DeleteRace() {\n    const restURL = \"http://localhost:8081/race/rest/races/\" + this.props.data.id;\n    await fetch(restURL, {\n      method: \"DELETE\",\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n    window.location.assign(\"/upcomingraces\");\n  }\n\n  componentDidMount() {//console.log(this.props.data.id)\n  }\n\n  async Register() {\n    const restURL = \"http://localhost:8081/race/rest/users/registerForRace/\" + this.props.data.id;\n    await fetch(restURL, {\n      method: \"POST\",\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json'\n      }\n    });\n    window.location.assign(\"/upcomingraces\");\n  }\n\n  async Withdraw() {\n    const restURL = \"http://localhost:8081/race/rest/users/withdraw/\" + this.props.data.id;\n    await fetch(restURL, {\n      method: \"POST\",\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json'\n      }\n    });\n    window.location.assign(\"/upcomingraces\");\n  }\n\n  render() {\n    const isRegistered = this.isRegistered();\n\n    if (isRegistered) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Race\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"Name\",\n          children: this.props.data.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"RegDrivers\",\n          children: [\"Registered : \", this.props.data.results.length, \" / \", this.props.data.maxDrivers]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"Circuit\",\n          children: [\"Circuit : \", this.props.data.circuit.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"Date\",\n          children: [\"Date of race : \", this.props.data.race_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"eorDate\",\n          children: [\"End of registrations : \", this.props.data.eor_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"reg-button\",\n            onClick: () => {\n              this.Withdraw();\n            },\n            children: \"WITHDRAW\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"details-button\",\n            onClick: () => {\n              this.props.showDetails(this.props.data);\n            },\n            children: \"DETAILS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(this.renderDelete, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Race\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"Name\",\n          children: this.props.data.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"RegDrivers\",\n          children: [\"Registered : \", this.props.data.results.length, \" / \", this.props.data.maxDrivers]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"Circuit\",\n          children: [\"Circuit : \", this.props.data.circuit.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"Date\",\n          children: [\"Date of race : \", this.props.data.race_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"eorDate\",\n          children: [\"End of registrations : \", this.props.data.eor_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"reg-button\",\n            onClick: () => {\n              this.Register();\n            },\n            children: \"REGISTER\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"details-button\",\n            onClick: () => {\n              this.props.showDetails(this.props.data);\n            },\n            children: \"DETAILS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(this.renderDelete, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default Race;","map":{"version":3,"sources":["E:/School/Bc/appka/race-react/src/components/Race.js"],"names":["React","Component","Race","constructor","props","state","show","renderDelete","bind","isRegistered","data","results","array","forEach","element","user","id","organizor","role","DeleteRace","restURL","fetch","method","credentials","headers","window","location","assign","componentDidMount","Register","Withdraw","render","name","length","maxDrivers","circuit","race_date","eor_date","showDetails"],"mappings":"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","sourcesContent":["import './Race.css';\r\nimport React, { Component } from \"react\";\r\n\r\nclass Race extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false\r\n        }\r\n        this.renderDelete = this.renderDelete.bind(this);\r\n        this.isRegistered = this.isRegistered.bind(this);\r\n    }\r\n    isRegistered(){\r\n        if(this.props.data.results != null){\r\n\r\n            this.props.data.results.array.forEach(element => {\r\n                if(element.user.id === this.props.user.id){\r\n                    return true;\r\n                }\r\n            }\r\n            );\r\n        }\r\n        return false;\r\n    }\r\n    renderDelete() {\r\n        if ((this.props.data.organizor && (this.props.user.id === this.props.data.organizor.id))\r\n            || this.props.user.id === this.props.data.organizor\r\n            || this.props.user.role === \"ADMIN\") {\r\n            return <button className='delete-button' onClick={() => {\r\n                this.DeleteRace();\r\n            }}>DELETE</button>\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }\r\n    async DeleteRace() {\r\n\r\n        const restURL = \"http://localhost:8081/race/rest/races/\"+this.props.data.id;\r\n        await fetch(restURL, {\r\n            method: \"DELETE\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        window.location.assign(\"/upcomingraces\");\r\n    }\r\n    componentDidMount() {\r\n        //console.log(this.props.data.id)\r\n    }\r\n    async Register(){\r\n        const restURL = \"http://localhost:8081/race/rest/users/registerForRace/\"+this.props.data.id;\r\n        await fetch(restURL, {\r\n            method: \"POST\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n            }\r\n        })\r\n        window.location.assign(\"/upcomingraces\");\r\n    }\r\n\r\n    async Withdraw(){\r\n        const restURL = \"http://localhost:8081/race/rest/users/withdraw/\"+this.props.data.id;\r\n        await fetch(restURL, {\r\n            method: \"POST\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n            }\r\n        })\r\n        window.location.assign(\"/upcomingraces\");\r\n    }\r\n\r\n    render() {\r\n        const isRegistered = this.isRegistered();\r\n        if(isRegistered){\r\n            return (\r\n                <div className=\"Race\">\r\n                    <p className='Name'>{this.props.data.name}</p>\r\n                    <p className=\"RegDrivers\">Registered : {this.props.data.results.length} / {this.props.data.maxDrivers}</p>\r\n                    <p className=\"Circuit\">Circuit : {this.props.data.circuit.name}</p>\r\n                    <p className=\"Date\">Date of race : {this.props.data.race_date}</p>\r\n                    <p className=\"eorDate\">End of registrations : {this.props.data.eor_date}</p>\r\n                    <div className=\"buttons\">\r\n                        <button className='reg-button' onClick={() => {\r\n                            this.Withdraw();\r\n                        }}>WITHDRAW</button>\r\n                        <button className='details-button' onClick={() => {\r\n                            this.props.showDetails(this.props.data);\r\n                        }}>DETAILS</button>\r\n                        <this.renderDelete />\r\n                    </div>\r\n    \r\n                </div>)\r\n        }\r\n        else{\r\n            return (\r\n                <div className=\"Race\">\r\n                    <p className='Name'>{this.props.data.name}</p>\r\n                    <p className=\"RegDrivers\">Registered : {this.props.data.results.length} / {this.props.data.maxDrivers}</p>\r\n                    <p className=\"Circuit\">Circuit : {this.props.data.circuit.name}</p>\r\n                    <p className=\"Date\">Date of race : {this.props.data.race_date}</p>\r\n                    <p className=\"eorDate\">End of registrations : {this.props.data.eor_date}</p>\r\n                    <div className=\"buttons\">\r\n                        <button className='reg-button' onClick={() => {\r\n                            this.Register();\r\n                        }}>REGISTER</button>\r\n                        <button className='details-button' onClick={() => {\r\n                            this.props.showDetails(this.props.data);\r\n                        }}>DETAILS</button>\r\n                        <this.renderDelete />\r\n                    </div>\r\n    \r\n                </div>)\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport default Race;"]},"metadata":{},"sourceType":"module"}