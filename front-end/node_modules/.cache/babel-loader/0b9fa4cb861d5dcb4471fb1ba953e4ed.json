{"ast":null,"code":"import _asyncToGenerator from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"E:\\\\School\\\\Bcc\\\\bakalarka\\\\appka\\\\race-react\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import CreateRace from'../components/CreateRace';import AddCircuit from\"../components/AddCircuit\";import{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.state={isLoggedIn:false,profileData:[]};return _this;}_createClass(Home,[{key:\"checkLoggedIn\",value:function(){var _checkLoggedIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var restURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:restURL=\"/rest/users/isLoggedIn\";_context.next=3;return fetch(restURL,{method:\"GET\",credentials:'include',headers:{mode:'no-cors','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){_this2.setState({isLoggedIn:data});});case 3:this.fetchUser();case 4:case\"end\":return _context.stop();}}},_callee,this);}));function checkLoggedIn(){return _checkLoggedIn.apply(this,arguments);}return checkLoggedIn;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.checkLoggedIn();}},{key:\"fetchUser\",value:function(){var _fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this3=this;var restURL;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!this.state.isLoggedIn){_context2.next=4;break;}restURL=\"/rest/users/current\";_context2.next=4;return fetch(restURL,{method:\"GET\",credentials:'include',headers:{mode:'no-cors','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){_this3.setState({profileData:data});});case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function fetchUser(){return _fetchUser.apply(this,arguments);}return fetchUser;}()},{key:\"render\",value:function render(){if(this.state.profileData.role===\"ADMIN\"){console.log(this.state.profileData.role);return/*#__PURE__*/_jsxs(\"div\",{className:\"Home\",children:[/*#__PURE__*/_jsx(CreateRace,{}),/*#__PURE__*/_jsx(AddCircuit,{})]});}else if(this.state.profileData.role===\"ORGANIZER\"){console.log(this.state.profileData.role);return/*#__PURE__*/_jsx(\"div\",{className:\"Home\",children:/*#__PURE__*/_jsx(CreateRace,{})});}else{console.log(this.state.profileData.role);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the app\"})});}}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["E:/School/Bcc/bakalarka/appka/race-react/src/pages/Home.js"],"names":["CreateRace","AddCircuit","Component","Home","props","state","isLoggedIn","profileData","restURL","fetch","method","credentials","headers","mode","then","response","json","data","setState","fetchUser","checkLoggedIn","role","console","log"],"mappings":"ivBACA,MAAOA,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,SAAT,KAA0B,OAA1B,C,2FAEMC,CAAAA,I,4FACJ,cAAYC,KAAZ,CAAmB,sCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,UAAU,CAAE,KADD,CAEXC,WAAW,CAAE,EAFF,CAAb,CAFiB,aAMlB,C,oIACD,+JACMC,OADN,CACgB,wBADhB,uBAEQC,CAAAA,KAAK,CAACD,OAAD,CAAU,CACnBE,MAAM,CAAE,KADW,CAEnBC,WAAW,CAAE,SAFM,CAGnBC,OAAO,CAAE,CACPC,IAAI,CAAE,SADC,CAEP,eAAgB,kBAFT,CAHU,CAAV,CAAL,CAQHC,IARG,CAQE,SAAAC,QAAQ,CAAI,CAChB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAVG,EAWHF,IAXG,CAWE,SAAAG,IAAI,CAAI,CACZ,MAAI,CAACC,QAAL,CAAc,CAAEZ,UAAU,CAAEW,IAAd,CAAd,EACD,CAbG,CAFR,QAgBE,KAAKE,SAAL,GAhBF,2D,kIAmBA,4BAAoB,CAClB,KAAKC,aAAL,GACD,C,2GAED,wKACM,KAAKf,KAAL,CAAWC,UADjB,0BAEQE,OAFR,CAEkB,qBAFlB,wBAGUC,CAAAA,KAAK,CAACD,OAAD,CAAU,CACnBE,MAAM,CAAE,KADW,CAEnBC,WAAW,CAAE,SAFM,CAGnBC,OAAO,CAAE,CACPC,IAAI,CAAE,SADC,CAEP,eAAgB,kBAFT,CAHU,CAAV,CAAL,CAQHC,IARG,CAQE,SAAAC,QAAQ,CAAI,CAChB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAVG,EAWHF,IAXG,CAWE,SAAAG,IAAI,CAAI,CACZ,MAAI,CAACC,QAAL,CAAc,CAAEX,WAAW,CAAEU,IAAf,CAAd,EACD,CAbG,CAHV,8D,2GAoBA,iBAAS,CACP,GAAI,KAAKZ,KAAL,CAAWE,WAAX,CAAuBc,IAAvB,GAAgC,OAApC,CAA6C,CAC3CC,OAAO,CAACC,GAAR,CAAY,KAAKlB,KAAL,CAAWE,WAAX,CAAuBc,IAAnC,EACA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,KAAC,UAAD,IADF,cAEE,KAAC,UAAD,IAFF,GADF,CAMD,CARD,IAQO,IAAI,KAAKhB,KAAL,CAAWE,WAAX,CAAuBc,IAAvB,GAAgC,WAApC,CAAiD,CACtDC,OAAO,CAACC,GAAR,CAAY,KAAKlB,KAAL,CAAWE,WAAX,CAAuBc,IAAnC,EACA,mBACE,YAAK,SAAS,CAAC,MAAf,uBACE,KAAC,UAAD,IADF,EADF,CAKD,CAPM,IAQH,CACHC,OAAO,CAACC,GAAR,CAAY,KAAKlB,KAAL,CAAWE,WAAX,CAAuBc,IAAnC,EACD,mBACE,kCACE,0CADF,EADF,CAKD,CACA,C,kBA5EgBnB,S,EAgFnB,cAAeC,CAAAA,IAAf","sourcesContent":["\r\nimport CreateRace from '../components/CreateRace';\r\nimport AddCircuit from \"../components/AddCircuit\";\r\nimport { Component } from \"react\";\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoggedIn: false,\r\n      profileData: [],\r\n    }\r\n  }\r\n  async checkLoggedIn() {\r\n    let restURL = \"/rest/users/isLoggedIn\";\r\n    await fetch(restURL, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        mode: 'no-cors',\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        this.setState({ isLoggedIn: data });\r\n      })\r\n    this.fetchUser()\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkLoggedIn()\r\n  }\r\n\r\n  async fetchUser() {\r\n    if (this.state.isLoggedIn) {\r\n      let restURL = \"/rest/users/current\";\r\n      await fetch(restURL, {\r\n        method: \"GET\",\r\n        credentials: 'include',\r\n        headers: {\r\n          mode: 'no-cors',\r\n          'Content-Type': 'application/json',\r\n        }\r\n      })\r\n        .then(response => {\r\n          return response.json()\r\n        })\r\n        .then(data => {\r\n          this.setState({ profileData: data });\r\n        })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.profileData.role === \"ADMIN\") {\r\n      console.log(this.state.profileData.role)\r\n      return (\r\n        <div className=\"Home\">\r\n          <CreateRace />\r\n          <AddCircuit />\r\n        </div>\r\n      );\r\n    } else if (this.state.profileData.role === \"ORGANIZER\") {\r\n      console.log(this.state.profileData.role)\r\n      return (\r\n        <div className=\"Home\">\r\n          <CreateRace />\r\n        </div>\r\n      );\r\n    }\r\n   else {\r\n     console.log(this.state.profileData.role)\r\n    return (\r\n      <div>\r\n        <h2>Welcome to the app</h2>\r\n      </div>\r\n    );\r\n  }\r\n  }\r\n\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}