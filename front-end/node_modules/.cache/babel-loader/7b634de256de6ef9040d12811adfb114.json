{"ast":null,"code":"var _jsxFileName = \"E:\\\\School\\\\Bc\\\\appka\\\\race-react\\\\src\\\\components\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport '../App.css';\nimport CreateRace from './CreateRace';\nimport AddCircuit from \"./AddCircuit\";\nimport React, { useEffect, useState } from \"react\";\nimport { wait } from '@testing-library/user-event/dist/utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [profileData, setProfileData] = useState([]);\n\n  async function checkLoggedIn() {\n    let restURL = \"http://localhost:8081/race/rest/users/isLoggedIn\";\n    await fetch(restURL, {\n      method: \"GET\",\n      credentials: 'include',\n      headers: {\n        mode: 'no-cors',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      setIsLoggedIn(data);\n    });\n  }\n\n  useEffect(() => {\n    checkLoggedIn();\n    wait(200);\n    fetchUser();\n  }, []);\n\n  async function fetchUser() {\n    if (isLoggedIn) {\n      let restURL = \"http://localhost:8081/race/rest/users/current\";\n      await fetch(restURL, {\n        method: \"GET\",\n        credentials: 'include',\n        headers: {\n          mode: 'no-cors',\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        setProfileData(data);\n      });\n    }\n  }\n\n  if (isLoggedIn) {\n    console.log(profileData);\n\n    if (profileData.role === \"ADMIN\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Home\",\n        children: [/*#__PURE__*/_jsxDEV(CreateRace, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AddCircuit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this);\n    } else if (profileData.role === \"ORGANIZOR\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Home\",\n        children: /*#__PURE__*/_jsxDEV(CreateRace, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Welcome to the app\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(Home, \"tRZIWirTRdJuKddDAozaFwiTe8U=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["E:/School/Bc/appka/race-react/src/components/Home.js"],"names":["CreateRace","AddCircuit","React","useEffect","useState","wait","Home","isLoggedIn","setIsLoggedIn","profileData","setProfileData","checkLoggedIn","restURL","fetch","method","credentials","headers","mode","then","response","json","data","fetchUser","console","log","role"],"mappings":";;;AACA,OAAO,YAAP;AACA,OAAOA,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,QAAqB,wCAArB;;;AAEA,SAASC,IAAT,GAAgB;AAAA;;AACd,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BJ,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACK,WAAD,EAAcC,cAAd,IAAgCN,QAAQ,CAAC,EAAD,CAA9C;;AAEA,iBAAeO,aAAf,GAA+B;AAC7B,QAAIC,OAAO,GAAG,kDAAd;AACA,UAAMC,KAAK,CAACD,OAAD,EAAU;AACnBE,MAAAA,MAAM,EAAE,KADW;AAEnBC,MAAAA,WAAW,EAAE,SAFM;AAGnBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,IAAI,EAAE,SADC;AAEP,wBAAgB;AAFT;AAHU,KAAV,CAAL,CAQHC,IARG,CAQEC,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,KAVG,EAWHF,IAXG,CAWEG,IAAI,IAAI;AACZb,MAAAA,aAAa,CAACa,IAAD,CAAb;AACD,KAbG,CAAN;AAcD;;AAEDlB,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,aAAa;AACbN,IAAAA,IAAI,CAAC,GAAD,CAAJ;AACAiB,IAAAA,SAAS;AACV,GAJQ,EAIN,EAJM,CAAT;;AAMA,iBAAeA,SAAf,GAA2B;AACzB,QAAGf,UAAH,EAAc;AACZ,UAAIK,OAAO,GAAG,+CAAd;AACA,YAAMC,KAAK,CAACD,OAAD,EAAU;AACnBE,QAAAA,MAAM,EAAE,KADW;AAEnBC,QAAAA,WAAW,EAAE,SAFM;AAGnBC,QAAAA,OAAO,EAAE;AACPC,UAAAA,IAAI,EAAE,SADC;AAEP,0BAAgB;AAFT;AAHU,OAAV,CAAL,CAQHC,IARG,CAQEC,QAAQ,IAAI;AAChB,eAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,OAVG,EAWHF,IAXG,CAWEG,IAAI,IAAI;AACZX,QAAAA,cAAc,CAACW,IAAD,CAAd;AACD,OAbG,CAAN;AAcD;AACF;;AAED,MAAId,UAAJ,EAAgB;AACdgB,IAAAA,OAAO,CAACC,GAAR,CAAYf,WAAZ;;AACA,QAAIA,WAAW,CAACgB,IAAZ,KAAqB,OAAzB,EAAkC;AAChC,0BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAMD,KAPD,MAOO,IAAIhB,WAAW,CAACgB,IAAZ,KAAqB,WAAzB,EAAsC;AAC3C,0BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAKD;AACF,GAhBD,MAgBO;AACL,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAGD;AACF;;GArEQnB,I;;KAAAA,I;AAuET,eAAeA,IAAf","sourcesContent":["\r\nimport '../App.css';\r\nimport CreateRace from './CreateRace';\r\nimport AddCircuit from \"./AddCircuit\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { wait } from '@testing-library/user-event/dist/utils';\r\n\r\nfunction Home() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n  const [profileData, setProfileData] = useState([])\r\n\r\n  async function checkLoggedIn() {\r\n    let restURL = \"http://localhost:8081/race/rest/users/isLoggedIn\";\r\n    await fetch(restURL, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        mode: 'no-cors',\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        setIsLoggedIn(data);\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkLoggedIn();\r\n    wait(200);\r\n    fetchUser();\r\n  }, [])\r\n\r\n  async function fetchUser() {\r\n    if(isLoggedIn){\r\n      let restURL = \"http://localhost:8081/race/rest/users/current\";\r\n      await fetch(restURL, {\r\n        method: \"GET\",\r\n        credentials: 'include',\r\n        headers: {\r\n          mode: 'no-cors',\r\n          'Content-Type': 'application/json',\r\n        }\r\n      })\r\n        .then(response => {\r\n          return response.json()\r\n        })\r\n        .then(data => {\r\n          setProfileData(data);\r\n        })\r\n    }\r\n  }\r\n\r\n  if (isLoggedIn) {\r\n    console.log(profileData)\r\n    if (profileData.role === \"ADMIN\") {\r\n      return (\r\n        <div className=\"Home\">\r\n          <CreateRace />\r\n          <AddCircuit />\r\n        </div>\r\n      );\r\n    } else if (profileData.role === \"ORGANIZOR\") {\r\n      return (\r\n        <div className=\"Home\">\r\n          <CreateRace />\r\n        </div>\r\n      );\r\n    }\r\n  } else {\r\n    return (\r\n      <h2>Welcome to the app</h2>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}