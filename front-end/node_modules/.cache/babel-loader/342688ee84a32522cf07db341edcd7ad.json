{"ast":null,"code":"import _asyncToGenerator from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"E:\\\\School\\\\Bcc\\\\bakalarka\\\\appka\\\\race-react\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import CreateRace from'../components/CreateRace';import AddCircuit from\"../components/AddCircuit\";import{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.state={isLoggedIn:false,profileData:[]};_this.renderCreate=_this.renderCreate.bind(_assertThisInitialized(_this));return _this;}_createClass(Home,[{key:\"checkLoggedIn\",value:function(){var _checkLoggedIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var restURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:restURL=\"/rest/users/isLoggedIn\";_context.next=3;return fetch(restURL,{method:\"GET\",credentials:'include',headers:{mode:'no-cors','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){_this2.setState({isLoggedIn:data});});case 3:case\"end\":return _context.stop();}}},_callee);}));function checkLoggedIn(){return _checkLoggedIn.apply(this,arguments);}return checkLoggedIn;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.checkLoggedIn();this.fetchUser();}},{key:\"fetchUser\",value:function(){var _fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this3=this;var restURL;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:restURL=\"/rest/users/current\";_context2.next=3;return fetch(restURL,{method:\"GET\",credentials:'include',headers:{mode:'no-cors','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){_this3.setState({profileData:data});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));function fetchUser(){return _fetchUser.apply(this,arguments);}return fetchUser;}()},{key:\"renderCreate\",value:function renderCreate(){console.log(this.state.profileData);if(this.state.profileData.role===\"ADMIN\"||this.state.profileData.role===\"ORGANIZER\"){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CreateRace,{}),/*#__PURE__*/_jsx(AddCircuit,{})]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the app\"}),/*#__PURE__*/_jsx(this.renderCreate,{})]});}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["E:/School/Bcc/bakalarka/appka/race-react/src/pages/Home.js"],"names":["CreateRace","AddCircuit","Component","Home","props","state","isLoggedIn","profileData","renderCreate","bind","restURL","fetch","method","credentials","headers","mode","then","response","json","data","setState","checkLoggedIn","fetchUser","console","log","role"],"mappings":"+3BACA,MAAOA,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAASC,SAAT,KAA0B,OAA1B,C,2FAEMC,CAAAA,I,4FACJ,cAAYC,KAAZ,CAAmB,sCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,UAAU,CAAE,KADD,CAEXC,WAAW,CAAE,EAFF,CAAb,CAIA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CANiB,aAOlB,C,oIACD,+JACMC,OADN,CACgB,wBADhB,uBAEQC,CAAAA,KAAK,CAACD,OAAD,CAAU,CACnBE,MAAM,CAAE,KADW,CAEnBC,WAAW,CAAE,SAFM,CAGnBC,OAAO,CAAE,CACPC,IAAI,CAAE,SADC,CAEP,eAAgB,kBAFT,CAHU,CAAV,CAAL,CAQHC,IARG,CAQE,SAAAC,QAAQ,CAAI,CAChB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAVG,EAWHF,IAXG,CAWE,SAAAG,IAAI,CAAI,CACZ,MAAI,CAACC,QAAL,CAAc,CAAEd,UAAU,CAAEa,IAAd,CAAd,EACD,CAbG,CAFR,uD,kIAkBA,4BAAoB,CAClB,KAAKE,aAAL,GACA,KAAKC,SAAL,GACD,C,2GAED,oKACQZ,OADR,CACkB,qBADlB,wBAEUC,CAAAA,KAAK,CAACD,OAAD,CAAU,CACnBE,MAAM,CAAE,KADW,CAEnBC,WAAW,CAAE,SAFM,CAGnBC,OAAO,CAAE,CACPC,IAAI,CAAE,SADC,CAEP,eAAgB,kBAFT,CAHU,CAAV,CAAL,CAQHC,IARG,CAQE,SAAAC,QAAQ,CAAI,CAChB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAVG,EAWHF,IAXG,CAWE,SAAAG,IAAI,CAAI,CACZ,MAAI,CAACC,QAAL,CAAc,CAAEb,WAAW,CAAEY,IAAf,CAAd,EACD,CAbG,CAFV,yD,iHAkBA,uBAAe,CACbI,OAAO,CAACC,GAAR,CAAY,KAAKnB,KAAL,CAAWE,WAAvB,EACA,GAAI,KAAKF,KAAL,CAAWE,WAAX,CAAuBkB,IAAvB,GAAgC,OAAhC,EAA2C,KAAKpB,KAAL,CAAWE,WAAX,CAAuBkB,IAAvB,GAAgC,WAA/E,CAA4F,CAC1F,mBAAQ,oCAAK,KAAC,UAAD,IAAL,cACN,KAAC,UAAD,IADM,GAAR,CAED,CACF,C,sBAED,iBAAS,CACP,mBACE,oCACE,0CADF,cAEE,UAAM,YAAN,IAFF,GADF,CAMD,C,kBAjEgBvB,S,EAqEnB,cAAeC,CAAAA,IAAf","sourcesContent":["\r\nimport CreateRace from '../components/CreateRace';\r\nimport AddCircuit from \"../components/AddCircuit\";\r\nimport { Component } from \"react\";\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoggedIn: false,\r\n      profileData: [],\r\n    }\r\n    this.renderCreate = this.renderCreate.bind(this)\r\n  }\r\n  async checkLoggedIn() {\r\n    let restURL = \"/rest/users/isLoggedIn\";\r\n    await fetch(restURL, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        mode: 'no-cors',\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        this.setState({ isLoggedIn: data });\r\n      })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkLoggedIn()\r\n    this.fetchUser()\r\n  }\r\n\r\n  async fetchUser() {\r\n      let restURL = \"/rest/users/current\";\r\n      await fetch(restURL, {\r\n        method: \"GET\",\r\n        credentials: 'include',\r\n        headers: {\r\n          mode: 'no-cors',\r\n          'Content-Type': 'application/json',\r\n        }\r\n      })\r\n        .then(response => {\r\n          return response.json()\r\n        })\r\n        .then(data => {\r\n          this.setState({ profileData: data });\r\n        })\r\n  }\r\n\r\n  renderCreate() {\r\n    console.log(this.state.profileData)\r\n    if (this.state.profileData.role === \"ADMIN\" || this.state.profileData.role === \"ORGANIZER\") {\r\n      return (<div><CreateRace />\r\n        <AddCircuit /></div>);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Welcome to the app</h2>\r\n        <this.renderCreate />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}