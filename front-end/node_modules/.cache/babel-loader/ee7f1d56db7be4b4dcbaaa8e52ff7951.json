{"ast":null,"code":"import _asyncToGenerator from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"E:/School/Bc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"E:\\\\School\\\\Bc\\\\bakalarka\\\\appka\\\\race-react\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import'../styles/Team.css';import React,{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Team=/*#__PURE__*/function(_Component){_inherits(Team,_Component);var _super=_createSuper(Team);function Team(props){var _this;_classCallCheck(this,Team);_this=_super.call(this,props);_this.Register=function(){return;};_this.renderDelete=_this.renderDelete.bind(_assertThisInitialized(_this));_this.renderJoin=_this.renderJoin.bind(_assertThisInitialized(_this));_this.joinTeam=_this.joinTeam.bind(_assertThisInitialized(_this));_this.leaveTeam=_this.leaveTeam.bind(_assertThisInitialized(_this));_this.state={message:\"\",drivers:[]};return _this;}_createClass(Team,[{key:\"renderDelete\",value:function renderDelete(){var _this2=this;if(this.props.user.id===this.props.data.teamOwner.id||this.props.user.id===this.props.data.teamOwner||this.props.user.role===\"ADMIN\"){return/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:function onClick(){_this2.DeleteTeam();},children:\"DELETE\"});}else{return;}}},{key:\"leaveTeam\",value:function leaveTeam(){var restURL=\"/rest/memberships/\"+this.props.data.id+\"/leave\";fetch(restURL,{method:\"DELETE\",credentials:'include',headers:{'Accept':'application/json','Content-Type':'application/json'}});window.location.assign(\"/teams\");}},{key:\"renderJoin\",value:function renderJoin(){var _this3=this;var elements=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Message for the join request : \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.message,onChange:function onChange(event){return _this3.handleChangeMessage(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"join-button\",onClick:this.joinTeam,children:\"JOIN TEAM\"})]});if(this.props.user.id===this.props.data.teamOwner.id){elements=null;}this.props.data.memberships.forEach(function(mem){if(mem.user===_this3.props.user.id&&mem.status==='ACTIVE'){elements=/*#__PURE__*/_jsx(\"button\",{className:\"leave-button\",onClick:_this3.leaveTeam,children:\"LEAVE TEAM\"});}});return elements;}},{key:\"DeleteTeam\",value:function(){var _DeleteTeam=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var restURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:restURL=\"/rest/teams/\"+this.props.data.id;_context.next=3;return fetch(restURL,{method:\"DELETE\",credentials:'include',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:window.location.assign(\"/teams\");case 4:case\"end\":return _context.stop();}}},_callee,this);}));function DeleteTeam(){return _DeleteTeam.apply(this,arguments);}return DeleteTeam;}()},{key:\"componentDidMount\",value:function componentDidMount(){var driversList=[];this.props.data.memberships.forEach(function(element){if(element.status==='ACTIVE'){driversList.push(/*#__PURE__*/_jsxs(\"p\",{children:[element.user.firstName,\" \",element.user.lastName]},element.user.id));}});this.setState({drivers:driversList});}},{key:\"joinTeam\",value:function(){var _joinTeam=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var restURL;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:restURL=\"/rest/memberships/\"+this.props.data.id+\"/join\";_context2.next=3;return fetch(restURL,{method:\"PUT\",credentials:'include',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({message:this.state.message})}).then(function(response){if(response.status===\"200\"){window.alert(\"Request was sent.\");}});case 3:window.location.assign(\"/teams\");case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function joinTeam(){return _joinTeam.apply(this,arguments);}return joinTeam;}()},{key:\"handleChangeMessage\",value:function handleChangeMessage(value){this.setState({message:value});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"Team\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"Name\",children:this.props.data.name}),/*#__PURE__*/_jsx(\"div\",{className:\"Drivers\",children:\"Drivers :\"}),this.state.drivers,/*#__PURE__*/_jsx(this.renderDelete,{}),/*#__PURE__*/_jsx(this.renderJoin,{})]});}}]);return Team;}(Component);export default Team;","map":{"version":3,"sources":["E:/School/Bc/bakalarka/appka/race-react/src/components/Team.js"],"names":["React","Component","Team","props","Register","renderDelete","bind","renderJoin","joinTeam","leaveTeam","state","message","drivers","user","id","data","teamOwner","role","DeleteTeam","restURL","fetch","method","credentials","headers","window","location","assign","elements","event","handleChangeMessage","target","value","memberships","forEach","mem","status","driversList","element","push","firstName","lastName","setState","body","JSON","stringify","then","response","alert","name"],"mappings":"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","sourcesContent":["import '../styles/Team.css';\r\nimport React, { Component } from \"react\";\r\n\r\nclass Team extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.renderDelete = this.renderDelete.bind(this);\r\n        this.renderJoin = this.renderJoin.bind(this);\r\n        this.joinTeam = this.joinTeam.bind(this);\r\n        this.leaveTeam = this.leaveTeam.bind(this);\r\n        this.state = {\r\n            message: \"\",\r\n            drivers: []\r\n        }\r\n    }\r\n\r\n    renderDelete() {\r\n        if (((this.props.user.id === this.props.data.teamOwner.id))\r\n            || this.props.user.id === this.props.data.teamOwner\r\n            || this.props.user.role === \"ADMIN\") {\r\n            return <button className='delete-button' onClick={() => {\r\n                this.DeleteTeam();\r\n            }}>DELETE</button>\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }\r\n    leaveTeam() {\r\n        const restURL = \"/rest/memberships/\" + this.props.data.id + \"/leave\";\r\n        fetch(restURL, {\r\n            method: \"DELETE\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        window.location.assign(\"/teams\");\r\n    }\r\n    renderJoin() {\r\n        var elements = <div><p>Message for the join request : </p><input type=\"text\" value={this.state.message} onChange={event => this.handleChangeMessage(event.target.value)} /><button className='join-button' onClick={this.joinTeam}>JOIN TEAM</button></div>;\r\n        if (this.props.user.id === this.props.data.teamOwner.id) {\r\n            elements = null;\r\n        }\r\n        this.props.data.memberships.forEach(mem => {\r\n            if (mem.user === this.props.user.id && mem.status === 'ACTIVE') {\r\n                elements = <button className='leave-button' onClick={this.leaveTeam}>LEAVE TEAM</button>;\r\n            }\r\n        })\r\n        return elements;\r\n    }\r\n    async DeleteTeam() {\r\n\r\n        const restURL = \"/rest/teams/\" + this.props.data.id;\r\n        await fetch(restURL, {\r\n            method: \"DELETE\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        window.location.assign(\"/teams\");\r\n    }\r\n    componentDidMount() {\r\n        let driversList = []\r\n        this.props.data.memberships.forEach(element => {\r\n            if (element.status === 'ACTIVE') {\r\n                driversList.push(<p key={element.user.id}>{element.user.firstName} {element.user.lastName}</p>)\r\n            }\r\n        });\r\n        this.setState({ drivers: driversList })\r\n    }\r\n    Register = () => {\r\n        return;\r\n    }\r\n    async joinTeam() {\r\n        const restURL = \"/rest/memberships/\" + this.props.data.id + \"/join\";\r\n        await fetch(restURL, {\r\n            method: \"PUT\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                message: this.state.message\r\n            })\r\n        }).then(response => {\r\n            if (response.status === \"200\") {\r\n                window.alert(\"Request was sent.\")\r\n            }\r\n        })\r\n        window.location.assign(\"/teams\");\r\n\r\n    }\r\n\r\n    handleChangeMessage(value) {\r\n        this.setState({ message: value });\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"Team\">\r\n                <p className='Name'>{this.props.data.name}</p>\r\n                <div className=\"Drivers\">Drivers :</div>\r\n\r\n                {this.state.drivers}\r\n                <this.renderDelete />\r\n                <this.renderJoin />\r\n            </div>)\r\n    }\r\n}\r\n\r\nexport default Team;"]},"metadata":{},"sourceType":"module"}