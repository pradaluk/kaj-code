{"ast":null,"code":"import _asyncToGenerator from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"E:/School/Bcc/bakalarka/appka/race-react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"E:\\\\School\\\\Bcc\\\\bakalarka\\\\appka\\\\race-react\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import'../styles/MyProfile.css';import React,{Component}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyProfile=/*#__PURE__*/function(_Component){_inherits(MyProfile,_Component);var _super=_createSuper(MyProfile);function MyProfile(props){var _this;_classCallCheck(this,MyProfile);_this=_super.call(this,props);_this.state={profileData:[],readOnly:true,buttonText:\"EDIT\",firstName:\"\",lastName:\"\",age:\"\",email:\"\",username:\"\"};_this.enableEdit=_this.enableEdit.bind(_assertThisInitialized(_this));return _this;}_createClass(MyProfile,[{key:\"fetchData\",value:function(){var _fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var restURL;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:restURL=\"http://localhost:8081/race/rest/users/current\";_context.next=3;return fetch(restURL,{method:\"GET\",credentials:'include',headers:{mode:'no-cors','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){_this2.setState({profileData:data,firstName:data.firstName,lastName:data.lastName,age:data.age,email:data.email,username:data.username});});case 3:case\"end\":return _context.stop();}}},_callee);}));function fetchData(){return _fetchData.apply(this,arguments);}return fetchData;}()},{key:\"enableEdit\",value:function enableEdit(){if(this.state.readOnly){this.setState({readOnly:false});this.setState({buttonText:\"SAVE\"});}else{this.saveData();this.setState({readOnly:true});this.setState({buttonText:\"EDIT\"});}}},{key:\"saveData\",value:function(){var _saveData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var restURL;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:restURL=\"http://localhost:8081/race/rest/users/\"+this.state.profileData.id;_context2.next=3;return fetch(restURL,{method:\"PUT\",credentials:'include',headers:{'Access-Control-Allow-Origin':'http://localhost:3000','Content-Type':'application/json'},body:JSON.stringify({id:this.state.profileData.id,username:this.state.username,firstName:this.state.firstName,lastName:this.state.lastName,age:this.state.age,email:this.state.email})}).then(function(response){return response.json();});case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function saveData(){return _saveData.apply(this,arguments);}return saveData;}()},{key:\"Logout\",value:function(){var _Logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var restURL;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:restURL=\"http://localhost:8081/race/logout\";_context3.next=3;return fetch(restURL,{method:\"POST\",credentials:'include',headers:{'Access-Control-Allow-Origin':'http://localhost:3000','Content-Type':'application/json'}}).then(function(response){return response.json();});case 3:window.location.assign(\"/\");case 4:case\"end\":return _context3.stop();}}},_callee3);}));function Logout(){return _Logout.apply(this,arguments);}return Logout;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"handleChangeFirstName\",value:function handleChangeFirstName(value){this.setState({firstName:value});}},{key:\"handleChangeLastName\",value:function handleChangeLastName(value){this.setState({lastName:value});}},{key:\"handleChangeEmail\",value:function handleChangeEmail(value){this.setState({email:value});}},{key:\"handleChangeAge\",value:function handleChangeAge(value){this.setState({age:value});}},{key:\"handleChangePassword\",value:function handleChangePassword(value){this.setState({password:value});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"MyProfile\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"firstName\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"First name : \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",readOnly:this.state.readOnly,value:this.state.firstName,onChange:function onChange(event){return _this3.handleChangeFirstName(event.target.value);},className:\"firstName-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lastName\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Last name : \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",readOnly:this.state.readOnly,value:this.state.lastName,onChange:function onChange(event){return _this3.handleChangeLastName(event.target.value);},className:\"lastName-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email : \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",readOnly:this.state.readOnly,value:this.state.email,onChange:function onChange(event){return _this3.handleChangeEmail(event.target.value);},className:\"email-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"username\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Username : \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",readOnly:true,value:this.state.username,className:\"username-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"age\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Age : \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",readOnly:this.state.readOnly,value:this.state.age,onChange:function onChange(event){return _this3.handleChangeAge(event.target.value);},className:\"age-input\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"edit\",onClick:this.enableEdit,children:this.state.buttonText}),/*#__PURE__*/_jsx(\"button\",{className:\"logout\",onClick:this.Logout,children:\"LOGOUT\"})]});}}]);return MyProfile;}(Component);export default MyProfile;","map":{"version":3,"sources":["E:/School/Bcc/bakalarka/appka/race-react/src/components/MyProfile.js"],"names":["React","Component","MyProfile","props","state","profileData","readOnly","buttonText","firstName","lastName","age","email","username","enableEdit","bind","restURL","fetch","method","credentials","headers","mode","then","response","json","data","setState","saveData","id","body","JSON","stringify","window","location","assign","fetchData","value","password","event","handleChangeFirstName","target","handleChangeLastName","handleChangeEmail","handleChangeAge","Logout"],"mappings":"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","sourcesContent":["import '../styles/MyProfile.css';\r\nimport React, { Component } from \"react\";\r\n\r\nclass MyProfile extends Component {\r\n\r\n\r\n    async fetchData() {\r\n        const restURL = \"http://localhost:8081/race/rest/users/current\";\r\n        await fetch(restURL, {\r\n            method: \"GET\",\r\n            credentials: 'include',\r\n            headers: {\r\n                mode: 'no-cors',\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => {\r\n                return response.json()\r\n            })\r\n            .then(data => {\r\n                this.setState({\r\n                    profileData: data,\r\n                    firstName: data.firstName,\r\n                    lastName: data.lastName,\r\n                    age: data.age,\r\n                    email: data.email,\r\n                    username: data.username\r\n                });\r\n            })\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            profileData: [],\r\n            readOnly: true,\r\n            buttonText: \"EDIT\",\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            age: \"\",\r\n            email: \"\",\r\n            username: \"\"\r\n        }\r\n        this.enableEdit = this.enableEdit.bind(this);\r\n    }\r\n    enableEdit() {\r\n        if (this.state.readOnly) {\r\n            this.setState({ readOnly: false });\r\n            this.setState({ buttonText: \"SAVE\" });\r\n        } else {\r\n            this.saveData();\r\n            this.setState({ readOnly: true });\r\n            this.setState({ buttonText: \"EDIT\" });\r\n        }\r\n    }\r\n    async saveData() {\r\n        const restURL = \"http://localhost:8081/race/rest/users/\" + this.state.profileData.id;\r\n        await fetch(restURL, {\r\n            method: \"PUT\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': 'http://localhost:3000',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                id: this.state.profileData.id,\r\n                username: this.state.username,\r\n                firstName: this.state.firstName,\r\n                lastName: this.state.lastName,\r\n                age: this.state.age,\r\n                email: this.state.email\r\n            })\r\n        }).then(response => {\r\n            return response.json()\r\n        })\r\n    }\r\n\r\n    async Logout() {\r\n        const restURL = \"http://localhost:8081/race/logout\";\r\n        await fetch(restURL, {\r\n            method: \"POST\",\r\n            credentials: 'include',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': 'http://localhost:3000',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => {\r\n            return response.json()\r\n        })\r\n        window.location.assign(\"/\");\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    handleChangeFirstName(value) {\r\n        this.setState({ firstName: value });\r\n    }\r\n    handleChangeLastName(value) {\r\n        this.setState({ lastName: value });\r\n    }\r\n    handleChangeEmail(value) {\r\n        this.setState({ email: value });\r\n    }\r\n    handleChangeAge(value) {\r\n        this.setState({ age: value });\r\n    }\r\n    handleChangePassword(value) {\r\n        this.setState({ password: value });\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"MyProfile\">\r\n                <h2>My Profile</h2>\r\n                <div className=\"firstName\">\r\n                    <p>First name : </p>\r\n                    <input type=\"text\" readOnly={this.state.readOnly} value={this.state.firstName} onChange={event => this.handleChangeFirstName(event.target.value)} className=\"firstName-input\" />\r\n                </div>\r\n                <div className=\"lastName\">\r\n                    <p>Last name : </p>\r\n                    <input type=\"text\" readOnly={this.state.readOnly} value={this.state.lastName} onChange={event => this.handleChangeLastName(event.target.value)} className=\"lastName-input\" />\r\n                </div>\r\n                <div className=\"email\">\r\n                    <p>Email : </p>\r\n                    <input type=\"text\" readOnly={this.state.readOnly} value={this.state.email} onChange={event => this.handleChangeEmail(event.target.value)} className=\"email-input\" />\r\n                </div>\r\n                <div className=\"username\">\r\n                    <p>Username : </p>\r\n                    <input type=\"text\" readOnly value={this.state.username} className=\"username-input\" />\r\n                </div>\r\n                <div className=\"age\">\r\n                    <p>Age : </p>\r\n                    <input type=\"number\" readOnly={this.state.readOnly} value={this.state.age} onChange={event => this.handleChangeAge(event.target.value)} className=\"age-input\" />\r\n                </div>\r\n                <button className=\"edit\" onClick={this.enableEdit}>{this.state.buttonText}</button>\r\n                <button className=\"logout\" onClick={this.Logout}>LOGOUT</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MyProfile;"]},"metadata":{},"sourceType":"module"}