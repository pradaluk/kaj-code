{"ast":null,"code":"var _jsxFileName = \"E:\\\\School\\\\Bc\\\\appka\\\\race-react\\\\src\\\\components\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport '../App.css';\nimport CreateRace from './CreateRace';\nimport AddCircuit from \"./AddCircuit\";\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [profileData, setProfileData] = useState([]);\n\n  async function checkLoggedIn() {\n    let restURL = \"http://localhost:8081/race/rest/users/isLoggedIn\";\n    await fetch(restURL, {\n      method: \"GET\",\n      credentials: 'include',\n      headers: {\n        mode: 'no-cors',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      setIsLoggedIn(data);\n    });\n  }\n\n  useEffect(() => {\n    checkLoggedIn();\n  }, []);\n\n  async function fetchUser() {\n    let restURL = \"http://localhost:8081/race/rest/users/current\";\n    await fetch(restURL, {\n      method: \"GET\",\n      credentials: 'include',\n      headers: {\n        mode: 'no-cors',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      setProfileData(data);\n    });\n  }\n\n  if (isLoggedIn) {\n    fetchUser();\n\n    if (profileData.role === \"ADMIN\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Home\",\n        children: [/*#__PURE__*/_jsxDEV(CreateRace, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AddCircuit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this);\n    } else if (profileData.role === \"ORGANIZOR\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Home\",\n        children: /*#__PURE__*/_jsxDEV(CreateRace, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Welcome to the app\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this);\n    }\n  }\n}\n\n_s(Home, \"tRZIWirTRdJuKddDAozaFwiTe8U=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["E:/School/Bc/appka/race-react/src/components/Home.js"],"names":["CreateRace","AddCircuit","React","useEffect","useState","Home","isLoggedIn","setIsLoggedIn","profileData","setProfileData","checkLoggedIn","restURL","fetch","method","credentials","headers","mode","then","response","json","data","fetchUser","role"],"mappings":";;;AACA,OAAO,YAAP;AACA,OAAOA,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;AAEA,SAASC,IAAT,GAAgB;AAAA;;AACd,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BH,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACI,WAAD,EAAcC,cAAd,IAAgCL,QAAQ,CAAC,EAAD,CAA9C;;AAEA,iBAAeM,aAAf,GAA+B;AAC7B,QAAIC,OAAO,GAAG,kDAAd;AACA,UAAMC,KAAK,CAACD,OAAD,EAAU;AACnBE,MAAAA,MAAM,EAAE,KADW;AAEnBC,MAAAA,WAAW,EAAE,SAFM;AAGnBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,IAAI,EAAE,SADC;AAEP,wBAAgB;AAFT;AAHU,KAAV,CAAL,CAQHC,IARG,CAQEC,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,KAVG,EAWHF,IAXG,CAWEG,IAAI,IAAI;AACZb,MAAAA,aAAa,CAACa,IAAD,CAAb;AACD,KAbG,CAAN;AAcD;;AACDjB,EAAAA,SAAS,CAAC,MAAM;AACdO,IAAAA,aAAa;AACd,GAFQ,EAEN,EAFM,CAAT;;AAKA,iBAAeW,SAAf,GAA2B;AACzB,QAAIV,OAAO,GAAG,+CAAd;AACA,UAAMC,KAAK,CAACD,OAAD,EAAU;AACnBE,MAAAA,MAAM,EAAE,KADW;AAEnBC,MAAAA,WAAW,EAAE,SAFM;AAGnBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,IAAI,EAAE,SADC;AAEP,wBAAgB;AAFT;AAHU,KAAV,CAAL,CAQHC,IARG,CAQEC,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,KAVG,EAWHF,IAXG,CAWEG,IAAI,IAAI;AACZX,MAAAA,cAAc,CAACW,IAAD,CAAd;AACD,KAbG,CAAN;AAcD;;AAED,MAAId,UAAJ,EAAgB;AACde,IAAAA,SAAS;;AACT,QAAIb,WAAW,CAACc,IAAZ,KAAqB,OAAzB,EAAkC;AAChC,0BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAMD,KAPD,MAOO,IAAId,WAAW,CAACc,IAAZ,KAAqB,WAAzB,EAAsC;AAC3C,0BACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAKD,KANM,MAMA;AACL,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAGD;AACF;AACF;;GAjEQjB,I;;KAAAA,I;AAmET,eAAeA,IAAf","sourcesContent":["\r\nimport '../App.css';\r\nimport CreateRace from './CreateRace';\r\nimport AddCircuit from \"./AddCircuit\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nfunction Home() {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n  const [profileData, setProfileData] = useState([])\r\n\r\n  async function checkLoggedIn() {\r\n    let restURL = \"http://localhost:8081/race/rest/users/isLoggedIn\";\r\n    await fetch(restURL, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        mode: 'no-cors',\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        setIsLoggedIn(data);\r\n      })\r\n  }\r\n  useEffect(() => {\r\n    checkLoggedIn();\r\n  }, [])\r\n\r\n\r\n  async function fetchUser() {\r\n    let restURL = \"http://localhost:8081/race/rest/users/current\";\r\n    await fetch(restURL, {\r\n      method: \"GET\",\r\n      credentials: 'include',\r\n      headers: {\r\n        mode: 'no-cors',\r\n        'Content-Type': 'application/json',\r\n      }\r\n    })\r\n      .then(response => {\r\n        return response.json()\r\n      })\r\n      .then(data => {\r\n        setProfileData(data);\r\n      })\r\n  }\r\n\r\n  if (isLoggedIn) {\r\n    fetchUser();\r\n    if (profileData.role === \"ADMIN\") {\r\n      return (\r\n        <div className=\"Home\">\r\n          <CreateRace />\r\n          <AddCircuit />\r\n        </div>\r\n      );\r\n    } else if (profileData.role === \"ORGANIZOR\") {\r\n      return (\r\n        <div className=\"Home\">\r\n          <CreateRace />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <h2>Welcome to the app</h2>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}